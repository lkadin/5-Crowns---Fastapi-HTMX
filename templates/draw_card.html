<style>
    .card-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 16px;
        margin-top: 30px;
    }

    .card {
        width: clamp(40px, 10vw, 120px);
        height: clamp(100px, 15vw, 180px);
        background: white;
        border: 2px solid #bfa76f;
        border-radius: 16px;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 12px;
        position: relative;
        transition: width 0.2s, height 0.2s;
        cursor: grab;
        touch-action: none;
        user-select: none;
    }

    .card:active {
        cursor: grabbing;
    }

    .card.sortable-ghost {
        opacity: 0.4;
    }

    .card.sortable-drag {
        opacity: 0.8;
        background: #f8f9fa;
        transform: scale(1.05);
    }

    .sortable-chosen {
        background: #e9ecef;
    }

    .top-left,
    .bottom-right {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        font-size: 1.2em;
        position: absolute;
    }

    .top-left {
        top: 10px;
        left: 12px;
    }

    .bottom-right {
        bottom: 10px;
        right: 12px;
        transform: rotate(180deg);
    }

    .middle {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
    }

    .suit.large {
        font-size: 3em;
    }

    .rank {
        font-weight: bold;
        font-size: 1.3em;
    }

    /* Suit colors */
    .suit.spade,
    .suit.large.spade,
    .rank.spade {
        color: black;
    }

    .suit.heart,
    .suit.large.heart,
    .rank.heart {
        color: red;
    }

    .suit.diamond,
    .suit.large.diamond,
    .rank.diamond {
        color: blue;
    }

    .suit.club,
    .suit.large.club,
    .rank.club {
        color: green;
    }

    .suit.star,
    .suit.large.star,
    .rank.star {
        color: #BA8E23;
    }

    .suit.joker,
    .suit.large.joker,
    .rank.joker {
        color: green;
    }
</style>
<div class="image-fluid"></div>
<div class="card-container" id="listForSorting" data-sortable-id="cards">
    {% for card in cards %}
    <div class="card" 
         data-card-id="{{ card.suit }}_{{ card.rank }}"
         draggable="true">
        <div class="top-left">
            <span class="rank {{ card.suit.lower() }}">{{ card.rank_html }}</span>
            <span class="suit {{ card.suit.lower() }}">{{ card.suit_html }}</span>
        </div>
        <div class="middle">
            <span class="suit large {{ card.suit.lower() }}">{{ card.suit_html }}</span>
        </div>
        <div class="bottom-right">
            <span class="rank {{ card.suit.lower() }}">{{ card.rank_html }}</span>
            <span class="suit {{ card.suit.lower() }}">{{ card.suit_html }}</span>
        </div>
    </div>
    {% endfor %}
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const container = document.getElementById('listForSorting');
    if (container) {
        new Sortable(container, {
            animation: 150,
            ghostClass: 'sortable-ghost',
            dragClass: 'sortable-drag',
            chosenClass: 'sortable-chosen',
            forceFallback: true,
            fallbackClass: 'sortable-fallback',
            onStart: function(evt) {
                console.log('Drag started', evt.oldIndex);
            },
            onEnd: function(evt) {
                console.log('Drag ended', evt.oldIndex, evt.newIndex);
            }
        });
    }
});
</script>
